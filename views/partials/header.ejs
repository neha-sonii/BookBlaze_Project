<div class="container">
    <!-- <div class="AnimateHeader"> -->
    <a class="" href="/">
        <img class="logo" src="/images/logo 1.png" alt="">
    </a>
    <!-- </div> -->

    <nav>
        <!-- hamburger menu button -->
        <button class="toggleMenu" onclick="toggleMenu()">&#9776;</button>
        <ul id="navLinks" class="AnimateHeader">
            <li class=""><a class="navtext" href="/">Home</a></li>
            <li class=""><a class="navtext" href="/about">About</a></li>
            <li class=""><a class="navtext" href="/bookstore">BookStore</a>
            </li>
            <li class=""><a class="navtext" href="/contact">Contact</a></li>
            <% if (user) { %>
                <!-- Profile dropdown on hover -->
                <div class="profile-dropdown">
                    <button class="user" id="profileBtn"><i class="fa-solid fa-user"
                            style="font-size: 24px;"></i></button>
                    <div class="profile-menu" id="profileMenu">
                        <div class="profile-info">Profile</div>
                        <div class="profile-email">
                            <%= user.email %>
                        </div>
                        <form action="/logout" method="POST" style="margin:0;">
                            <button type="submit" class="btn logout-btn">Logout</button>
                        </form>
                    </div>
                </div>
                <% } else { %>
                    <button class="button signin-btn"><a href="/login">Sign in</a></button>
                    <% } %>
        </ul>
    </nav>
</div>

<script>
    // Toggle navigation menu
    let nav = document.getElementById("navLinks");
    let display = 0;
    function toggleMenu() {
        if (display == 1) {
            nav.style.display = 'flex';
            display = 0;
        } else {
            nav.style.display = 'none';
            display = 1;
        }
    }

    // Add underline to nav link when clicked
    document.addEventListener('DOMContentLoaded', function () {
        const navLinks = document.querySelectorAll('#navLinks .navtext');
        navLinks.forEach(link => {
            link.addEventListener('click', function () {
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Optionally, set active based on current URL
        navLinks.forEach(link => {
            if (link.href === window.location.href) {
                link.classList.add('active');
            }
        });
    });
    // Hide navbar on scroll down, show on scroll up
    let lastScrollY = window.scrollY;
    const navbar = document.querySelector(".container");

    window.addEventListener("scroll", () => {
        const currentScrollY = window.scrollY;

        if (currentScrollY > lastScrollY && currentScrollY > 80) {
            // scrolling down
            navbar.classList.add("hide");
        } else {
            // scrolling up (even a little)
            navbar.classList.remove("hide");
        }

        lastScrollY = currentScrollY;
    });
</script>